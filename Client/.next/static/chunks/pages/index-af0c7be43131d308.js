(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3825:function(e,n,t){"use strict";t(1664),t(5893)},7820:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return w}});var r=t(9008),s=t.n(r),o=t(29),i=t(7794),a=t.n(i),l=t(2175);t(3825);var c=t(196),d=t(9583),u=t(1163),m=t(4231),p=t(2418),x=t.n(p),f=t(1955),h=t(7294),g=t(5893),b=m.Ry({Email:m.Z_().email().required("Please enter your email"),Password:m.Z_().min(6).required("Please enter your password")}),v=function e(){(0,h.useState)(function(){f.Z.remove("LoggedIn"),f.Z.remove("AdminLoggedIn"),f.Z.remove("UserLoggedIn")},[e]);var n,t=(0,u.useRouter)(),r=(0,l.TA)({initialValues:{Email:""},validationSchema:b,onSubmit:(n=(0,o.Z)(a().mark(function e(n,r){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c.ZP.post("http://127.0.0.1:8090/api/login",{Email:n.Email},{headers:{"Content-Type":"application/json"}}).then(function(){var e=(0,o.Z)(a().mark(function e(r){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x().compare(n.Password,r.data.recordset[0].Password);case 2:e.sent?(f.Z.set("LoggedIn",!0),"Admin"===r.data.recordset[0].Role?(t.push("/Admin"),f.Z.set("AdminLoggedIn",!0)):"User"===r.data.recordset[0].Role?(t.push("/User"),f.Z.set("UserLoggedIn",!0)):t.push("/")):(alert("Username or Password not found"),r.send("Username or Password not found"));case 4:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()),r.resetForm();case 2:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})}),s=r.values,i=r.errors,m=r.touched,p=r.handleBlur,v=r.handleChange,w=r.handleSubmit;return(0,g.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen py-2 bg-gray-100",children:(0,g.jsx)("main",{className:"flex flex-col items-center justify-center w-full flex-1 px-20 text-center",children:(0,g.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl flex w-2/3 max-w-4xl",children:[(0,g.jsxs)("div",{className:"w-3/5 p-5",children:[(0,g.jsxs)("div",{className:"text-left font-bold",children:[(0,g.jsx)("span",{className:"text-green-500",children:"School"}),"Task"]}),(0,g.jsxs)("div",{className:"py-10",children:[(0,g.jsx)("h2",{className:"text-3xl font-bold text-green-500 mb-5",children:"Log in to Account"}),(0,g.jsx)("div",{className:"border-2 w-10 border-green-500 inline-block mb-5"}),(0,g.jsxs)("form",{onSubmit:w,children:[(0,g.jsx)("input",{type:"hidden",name:"CSRFToken",value:""}),(0,g.jsxs)("div",{className:"flex flex-col items-center",children:[(0,g.jsxs)("div",{className:"bg-gray-100 w-64 p-2 flex items-center mb-3",children:[(0,g.jsx)(d.SRX,{className:"text-gray-400 m-2"}),(0,g.jsx)("input",{type:"email",name:"Email",placeholder:"Email",className:"bg-gray-100 outline-none text-sm flex-1",onChange:v,onBlur:p,value:s.Email,required:!0}),i.Email&&m.Email?(0,g.jsx)("p",{className:"text-red-500 absolute text-sm mt-8 ml-8",children:i.Email}):null]}),(0,g.jsxs)("div",{className:"bg-gray-100 w-64 p-2 flex items-center mb-5",children:[(0,g.jsx)(d.kUi,{className:"text-gray-400 m-2"}),(0,g.jsx)("input",{type:"password",name:"Password",placeholder:"Password",className:"bg-gray-100 outline-none text-sm flex-1",onChange:v,onBlur:p,value:s.Password,required:!0,autocomplete:"on"}),i.Password&&m.Password?(0,g.jsx)("p",{className:"text-red-500 absolute text-sm mt-8 ml-8",children:i.Password}):null]}),(0,g.jsx)("button",{type:"submit",className:"border-2 border-green-500 text-green-500 rounded-full px-12 py-2 inline-block font-semibold hover:bg-green-500 hover:text-white",children:"Log In"})]})]})]})]}),(0,g.jsxs)("div",{className:"w-2/5 bg-green-500 text-white rounded-tr-2xl rounded-br-2xl py-36 px-12",children:[(0,g.jsx)("h2",{className:"text-3xl font-bold mb-2",children:"Hello!"}),(0,g.jsx)("div",{className:"border-2 w-10 border-white inline-block mb-2"}),(0,g.jsx)("p",{className:"mb-10",children:"Fill up your personal information"}),(0,g.jsx)("a",{href:"/SignUp/SignUp",className:"border-2 border-white rounded-full px-12 py-2 inline-block font-semibold hover:bg-white hover:text-green-500",children:"Sign Up"})]})]})})})};function w(){return(0,g.jsxs)("div",{children:[(0,g.jsxs)(s(),{children:[(0,g.jsx)("title",{children:"Login Page"}),(0,g.jsx)("meta",{"http-equiv":"Content-Security-Policy",content:"script-src 'self' http://127.0.0.1:8090 'unsafe-inline'; img-src *; form-action 'none';"})]}),(0,g.jsx)("main",{className:"vh-100 d-flex justify-content-center align-items-center",children:(0,g.jsx)(v,{})})]})}},5557:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(7820)}])},1955:function(e,n){"use strict";/*! js-cookie v3.0.1 | MIT */ function t(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)e[r]=t[r]}return e}var r=function e(n,r){function s(e,s,o){if("undefined"!=typeof document){"number"==typeof(o=t({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var a in o)o[a]&&(i+="; "+a,!0!==o[a]&&(i+="="+o[a].split(";")[0]));return document.cookie=e+"="+n.write(s,e)+i}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],r={},s=0;s<t.length;s++){var o=t[s].split("="),i=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(r[a]=n.read(i,a),e===a)break}catch(l){}}return e?r[e]:r}},remove:function(e,n){s(e,"",t({},n,{expires:-1}))},withAttributes:function(n){return e(this.converter,t({},this.attributes,n))},withConverter:function(n){return e(t({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(n)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});n.Z=r}},function(e){e.O(0,[445,714,996,648,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);